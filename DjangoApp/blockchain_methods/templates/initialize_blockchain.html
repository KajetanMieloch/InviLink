<script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", async () => {
        if (window.solana && window.solana.isPhantom) {
            console.log("Phantom Wallet is available!");

            try {
                // Połączenie z Phantom Wallet
                const provider = window.solana;
                await provider.connect();
                console.log("Connected to wallet:", provider.publicKey.toString());

                // Połączenie z siecią Solana (devnet)
                const connection = new solanaWeb3.Connection(
                    solanaWeb3.clusterApiUrl('devnet'),
                    'confirmed'
                );

                // Pobranie balansu portfela
                const publicKey = provider.publicKey;
                const balance = await connection.getBalance(publicKey);

                // Konwersja balansu z lamports na SOL
                const solBalance = balance / solanaWeb3.LAMPORTS_PER_SOL;

                // Wyświetlenie balansu
                alert(`Twój balans: ${solBalance.toFixed(2)} SOL`);
                console.log(`Twój balans: ${solBalance} SOL`);
            } catch (error) {
                console.error("Error fetching balance:", error);
                alert("Błąd podczas pobierania balansu.");
            }
        } else {
            alert("Phantom Wallet nie jest dostępny. Zainstaluj go w swojej przeglądarce.");
        }
    });
</script>
